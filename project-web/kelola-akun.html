<!doctype html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kelola Akun</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background:#07103a; color:white; font-family:Inter,Arial; }
    .glass { background:rgba(255,255,255,0.07); backdrop-filter:blur(6px); border:1px solid rgba(255,255,255,0.1); }
  </style>
</head>

<body class="min-h-screen p-6">

  <a href="menu.html" class="text-sm mb-4 inline-block">‚Üê Kembali ke Menu</a>

  <div class="glass max-w-lg mx-auto p-6 rounded-xl">
    <h1 class="text-2xl font-bold mb-4">Kelola Akun</h1>

    <form id="editForm" class="space-y-3">

      <div>
        <label class="block mb-1">Nama</label>
        <input id="name" class="w-full p-2 rounded bg-slate-800">
      </div>

      <div>
        <label class="block mb-1">Username</label>
        <input id="username" class="w-full p-2 rounded bg-slate-800">
      </div>

      <div>
        <label class="block mb-1">Password Baru</label>
        <input id="password" type="password" class="w-full p-2 rounded bg-slate-800">
      </div>

      <button type="submit" class="px-4 py-2 bg-emerald-500 rounded-md">
        Simpan Perubahan
      </button>

    </form>
  </div>

  <!-- FOOTER -->
  <footer class="p-4 text-center glass w-full max-w-md rounded-md mx-auto mt-6">
    <p>@Copyright by 23552011321_Arya Fauzan_23 CNS B</p>
  </footer>

  <script>
    let users = JSON.parse(localStorage.getItem('users') || '[]');
    let logged = localStorage.getItem('loggedUser');

    // cari user yang login
    let index = users.findIndex(u => u.username === logged);
    let current = users[index];

    // tampilkan data
    document.getElementById('name').value = current.name;
    document.getElementById('username').value = current.username;

    document.getElementById('editForm').addEventListener('submit', function(e){
      e.preventDefault();

      const newName = document.getElementById('name').value;
      const newUsername = document.getElementById('username').value;
      const newPassword = document.getElementById('password').value;

      users[index].name = newName;
      users[index].username = newUsername;

      if(newPassword.trim() !== "") {
        users[index].password = newPassword;
      }

      // simpan perubahan
      localStorage.setItem('users', JSON.stringify(users));

      // update username login jika berubah
      localStorage.setItem('loggedUser', newUsername);

      alert("Akun berhasil diperbarui!");
      window.location.href = "menu.html";
    });
  </script>

</body>
</html>
